name: Main

on:
  workflow_dispatch:
    inputs:
      Version:
        description: 'version to be released'
        required: true
    
#  push:
#    tags:
#      - "v*.*.*"

jobs:
  cache-build-linux:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Build
        run: echo ${{ github.sha }} > awsroleswitcherlinux
      - name: Test
        run: cat awsroleswitcherlinux
      - uses: actions/cache@v3
        id: restore-build
        with:
          path: ./awsroleswitcherlinux
          key: ${{ github.sha }}
  cache-use-build:
    name: Retrive linux build from cache
    runs-on: ubuntu-latest
    needs: [cache-build-linux]
    steps:
      - uses: actions/checkout@v3
      - uses: actions/cache@v3
        id: restore-build
        with:
          path: ./awsroleswitcherlinux
          key: ${{ github.sha }}
      - run: echo "testingrun" && cat awsroleswitcherlinux
  
